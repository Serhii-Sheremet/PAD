PRAGMA foreign_keys=off;

BEGIN TRANSACTION;

ALTER TABLE LOCATIONS RENAME TO _LOCATIONS_old;

CREATE TABLE LOCATION
(
	ID INTEGER PRIMARY KEY AUTOINCREMENT,
	LOCALITY TEXT,
	LATITUDE TEXT,
	LONGITUDE TEXT,
	REGION TEXT,
	STATE TEXT,
	COUNTRY TEXT,
	COUNTRYCODE VARCHAR(2),
	LANGUAGECODE VARCHAR(2)
);


INSERT INTO LOCATION (LOCALITY, LATITUDE, LONGITUDE, REGION, STATE, COUNTRY, COUNTRYCODE, LANGUAGECODE)
  SELECT CITYEN, LATITUDE, LONGITUDE, AREAEN, STATEEN, COUNTRYEN, COUNTRYCODE, 'en'
  FROM _LOCATIONS_old order by ID;
  
INSERT INTO LOCATION (LOCALITY, LATITUDE, LONGITUDE, REGION, STATE, COUNTRY, COUNTRYCODE, LANGUAGECODE)
  SELECT CITYRU, LATITUDE, LONGITUDE, AREARU, STATERU, COUNTRYRU, COUNTRYCODE, 'ru'
  FROM _LOCATIONS_old 
  where CITYRU <> ''
  order by ID;
  
COMMIT;

PRAGMA foreign_keys=on;